<!DOCTYPE html>
<html lang="en">
<head>
  <title>Esme</title>
  <style>
    .image-carousel {
      transition: all 0.5s ease-in-out;
      width: 640px;
      height: 480px;
      background-image: url('https://www.ampm.com/styles/ajax-loader.gif');
      background-repeat: no-repeat;
      background-position: center;
    }
  </style>
</head>
<body>
  <div class="image-carousel loading">
  </div>

  <script type="text/javascript">
    // Definieer alle afbeeldingen die inde carousel moeten komen:
    const images = [
      'https://picsum.photos/640/480?1',
      'https://picsum.photos/640/480?2',
      'https://picsum.photos/640/480?3',
      'https://picsum.photos/640/480?4',
      'https://picsum.photos/640/480?5',
    ]
    // tijd in milliseconden tussen de overgang naar een andere afbeelding:
    const timeOut = 1500
    // Boolean of de carousel moet doorgaan naar de eerste afbeelding nadat de laatste afbeelding bereikt is:
    const loop = true

    // Het HTML element van de carousel:
    const carouselContainer = document.querySelector('.image-carousel')

    // teller die bijhoudt wat de huidige afbeelding is:
    // NB het 1e element van een array is 0 het laatste is n-1 waar n het aantal elementen uit de array is
    let ix = 0

    // De functie die er voor zorgt dat de juiste afbeelding getoond wordt:
    function carousel () {
      // gebruik de afbeelding die volgens ix de huidige is:
      carouselContainer.style.backgroundImage = `url('${images[ix]}')`
      // hoog ix op met 1:
      ix++
      // als ix nu gelijk is aan het aantal afbeeldingen 
      // en er is aangegevene dat er een loop moet zijn, 
      // zet dan de teller weer op 0 (de 1e afbeelding)
      if (ix === images.length && loop) ix = 0
      // als de teller niet hoger is dan het aantal afbeeldingen,
      // roep dan deze functie opnieuw aan
      if (ix < images.length) setTimeout(carousel, timeOut)
    }

    // start deze code als het hele HTML document is ingeladen in de browser:
    window.onload = () => {
      //teller die bijhoudt hoeveel afbeelding zijn ingeladen:
      let loaded = 0

      // preload alle afbeeldingen zodat de gebruikerservaring beter wordt:
      for (const src of images) {
        const img = new Image()
        // als de image is ingeladen door de browser, hoog dan de teller op met 1:
        img.onload = () => {
          // als alle agbeeldinge zijn ingeladen, start dan de carousel:
          if (++loaded === images.length) {
            carousel()
          }
        }
        img.src=src
      }
    }
  </script>  
</body>
</html>